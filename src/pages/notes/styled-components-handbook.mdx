---
title: Styled components handbook
createdAt: 2020-12-13T09:38:03.160Z
tags:
  - JavaScript
  - React
  - TypeScript
---

<MDXIntro>
  Styled components is a CSS-in-JS library that bridges the gap between
  components and styling, offering numerous features to get you up and running
  in styling components in a functional and reusable way.
</MDXIntro>

### Attributes

The styled components `.attrs()` function allows you to define additional props the styled component will have without needing to explicitly define it upon usage. In this case, type will be defaulted to `button` if not set. The `.attrs()` function can also accept an object for static props. However, if defined this way, the value cannot be overwritten by the user as the attributes take precedent.

```tsx
const AttributeButton = styled(Button).attrs((props) => ({
  type: props.type ?? 'button'
}))`
  color: white;
`
```

### Dynamic Components

Sometimes, you want to apply the same styles, but to a different underlying component (DOM element, react component, or styled component). Styled components come with a special `as` prop that will allow you to redefine the component rendered with the same style.

```tsx
const App = () => {
  return (
    <Button as="a" href="https://styled-components.com/">
      Link
    </Button>
  )
}
```

In this case the `<Button />` component will be rendered as an `<a />` tag.

### Global styles

Normally, styled components are automatically scoped to a local CSS class and therefore isolated from other components. In the case of `createGlobalStyle`, this limitation is removed and things like CSS resets or base stylesheets can be applied.

```tsx
import { createGlobalStyle } from 'styled-components'

const GlobalStyle = createGlobalStyle`
  *, *::before, *::after {
    box-sizing: border-box;
  }

  a {
    text-decoration: none;
  }
`
```

You should place `<GlobalStyle />` somewhere around the root of your applications.

### Jest integration

For testing, Styled Components also has a Jest plugin called [jest-styled-components](https://github.com/styled-components/jest-styled-components). This is incredibly useful as the unique autogenerated classnames makes it incredibly easy for snapshot tests to fail. The library also extends Jestâ€™s `expect` with the `.toHaveStyleRule()` matcher, so you can manually check whether an element has the expected styles.

```tsx
test('should have style', () => {
  const { getByText } = render(<Button title={'button'} />)
  expect(getByText(/button/u)).toHaveStyleRule('background-color', '#5a6268', {
    modifier: ':hover'
  })
})
```

### Pseudo elements and pseudo classes

Styled components support styling with pseudo elements, pseudo classes and nested selectors.

```tsx
import styled from 'styled-components'

const Button = styled.button`
  background-color: #6c757d;

  span {
    color: white;
  }

  :not(:disabled) {
    cursor: pointer;
  }

  :hover {
    background-color: #5a6268;
  }
`
```

### Styled objects

Sometimes we are forced to use style objects via the style prop. This could be because the codebase is only partially migrated to styled components or because some third party library uses it, something quite common with hooks-based libraries such as [react dropzone](https://github.com/react-dropzone/react-dropzone) or [react table](https://github.com/tannerlinsley/react-table). Styled components can merge these style objects into styled component styling.

```tsx
const StylePropButton = styled(Button)`
  ${(props) => props.$style ?? {}}
`

const App = () => (
  <StylePropButton $style={{ backgroundColor: '#007bff' }}>
    Primary
  </StylePropButton>
)
```

Naming the prop `$style` is crucial here. It prevents the styles from being applied twice. If the prop name was `style`, the button would be styled via inline styles as well since styled components passes props to the underlying component. Props with names that are prefixed with `$`, called `transient props`, are only used by the defined styled component and are not passed down to the underlying component.

### References

- [https://medium.com/javascript-in-plain-english/the-advanced-way-to-style-with-styled-components-98fb70c1eecc](https://medium.com/javascript-in-plain-english/the-advanced-way-to-style-with-styled-components-98fb70c1eecc)
- [https://styled-components.com/docs](https://styled-components.com/docs)
